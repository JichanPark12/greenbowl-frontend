"use client";

import { useGSAP } from "@gsap/react";
import gsap from "gsap";
import { useRef } from "react";

gsap.registerPlugin(useGSAP);

const AlcoholCharacter = ({ isPlay }: { isPlay: boolean }) => {
  const ref = useRef<SVGSVGElement>(null);

  useGSAP(
    () => {
      const tl = gsap.timeline({
        repeat: -1,
        repeatDelay: 2,
        delay: 0.5,
        paused: true,
      });
      tl.fromTo(
        "#alcohol",
        {
          x: 15,
          rotation: -90,
          transformOrigin: "left bottom",
        },
        {
          rotation: 0,
          ease: "bounce.out",
          duration: 1,
        }
      );
      tl.to("#alcoholFace", {
        y: 15,
      });
      tl.to(
        "#stress",
        {
          y: 20,
        },
        "<0"
      );
      tl.to(
        "#rightArm",
        {
          rotation: -15,
          y: 10,
          transformOrigin: "bottom center",
        },
        "<0"
      );
      if (!isPlay) {
        tl.pause(0);
      }
      if (isPlay) {
        tl.play();
      }
    },

    { scope: ref, dependencies: [isPlay], revertOnUpdate: true }
  );
  return (
    <svg
      width="168"
      height="168"
      viewBox="0 0 168 168"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      ref={ref}
    >
      <path
        d="M132.198 65.8867H68.2581C62.2216 65.8867 57.3281 70.7802 57.3281 76.8167V96.7167C57.3281 102.753 62.2216 107.647 68.2581 107.647H132.198C138.235 107.647 143.128 102.753 143.128 96.7167V76.8167C143.128 70.7802 138.235 65.8867 132.198 65.8867Z"
        fill="#E4F0D9"
      />
      <path
        d="M147.891 115.527H52.8308C51.6608 115.527 51.4508 114.317 52.3308 112.867L56.1708 106.567C56.8908 105.387 58.2708 104.457 59.2808 104.457H141.431C142.441 104.457 143.821 105.387 144.541 106.567L148.381 112.867C149.261 114.317 149.051 115.527 147.881 115.527H147.891Z"
        fill="#D5E0CB"
      />
      <path
        d="M61.59 123.885C61.59 122.686 60.6184 121.715 59.42 121.715C58.2215 121.715 57.25 122.686 57.25 123.885V135.705C57.25 136.903 58.2215 137.875 59.42 137.875C60.6184 137.875 61.59 136.903 61.59 135.705V123.885Z"
        fill="#A5AF9C"
      />
      <path
        d="M143.129 123.885C143.129 122.686 142.158 121.715 140.959 121.715C139.761 121.715 138.789 122.686 138.789 123.885V135.705C138.789 136.903 139.761 137.875 140.959 137.875C142.158 137.875 143.129 136.903 143.129 135.705V123.885Z"
        fill="#A5AF9C"
      />
      <path
        d="M146.473 123.608H54.2425C53.1225 123.608 52.2025 122.728 52.1425 121.608L51.8125 114.988H148.892L148.562 121.608C148.503 122.728 147.582 123.608 146.462 123.608H146.473Z"
        fill="#B0BAA7"
      />
      <path
        d="M123.583 87.855C126.573 100.865 117.303 108.875 104.293 111.865C91.2828 114.855 79.4528 111.685 76.4628 98.675C73.4728 85.665 81.6028 72.695 94.6128 69.705C107.623 66.715 120.593 74.845 123.583 87.855Z"
        fill="#C0D68B"
      />
      <path
        d="M89.8489 79.1055C72.7389 80.8755 73.0689 101.665 73.5189 109.085"
        stroke="#C0D68B"
        strokeWidth="9.76"
        strokeLinecap="round"
      />
      <path
        d="M84.3594 96.6953C85.9494 113.825 106.739 113.715 114.159 113.345"
        stroke="#C0D68B"
        strokeWidth="9.76"
        strokeLinecap="round"
      />
      <path
        d="M102.844 87.6367C104.434 104.767 125.224 104.657 132.644 104.287"
        stroke="#C0D68B"
        strokeWidth="9.76"
        strokeLinecap="round"
      />
      <path
        d="M126.736 68.7152C125.686 79.0752 120.806 86.5252 113.486 90.9852C106.996 94.9452 98.8263 96.4052 90.2263 95.7752C89.2763 95.7052 88.3263 95.6152 87.3763 95.4952C82.1463 94.8552 77.1663 93.5152 72.7263 91.4552C68.9863 89.7252 65.6163 87.4752 62.7963 84.7152C56.5563 78.5852 53.2763 70.1252 54.3263 59.7652C54.9063 54.0352 56.7063 48.7352 59.4363 44.1452C62.5363 38.9152 66.1663 33.9152 70.1863 29.3252C76.4063 22.2052 85.1663 18.0252 94.6263 19.1952C103.116 20.2452 110.206 25.3852 114.946 32.5552C118.606 38.1152 121.696 44.1152 124.146 50.2352C126.436 55.9252 127.416 62.2352 126.756 68.7452L126.736 68.7152Z"
        fill="#C0D68B"
      />
      <path
        d="M120.026 60.0048C120.086 74.9348 107.446 84.5248 91.7861 84.5648C76.1361 84.6048 63.4062 75.0648 63.3362 60.1448C63.2762 45.2148 75.9061 33.0948 91.5661 33.0548C107.226 33.0148 119.956 45.0848 120.026 60.0048Z"
        fill="#F3F3DF"
      />
      <g id="alcoholFace">
        <path
          d="M75.2344 54.8869C75.2344 54.8869 81.2244 55.1969 83.3744 52.2969"
          stroke="#44443F"
          strokeWidth="2"
          strokeMiterlimit="10"
          strokeLinecap="round"
        />
        <path
          d="M105.199 56.4256C105.199 56.4256 99.2094 56.1156 97.3594 53.0156"
          stroke="#44443F"
          strokeWidth="2"
          strokeMiterlimit="10"
          strokeLinecap="round"
        />
        <path
          d="M94.6229 62.8961C95.3729 62.9361 95.8229 62.1061 95.4229 61.4861C94.6229 60.2361 92.7529 59.2961 90.5329 59.1861C88.3129 59.0761 86.2529 59.8561 85.3629 61.0661C84.9529 61.6261 85.3829 62.4261 86.0729 62.4661L94.6229 62.9061V62.8961Z"
          fill="#44443F"
        />
      </g>
      <path
        id="rightArm"
        d="M119.89 82.2166C131.65 67.7966 118.61 52.5966 113 47.7266"
        stroke="#C0D68B"
        strokeWidth="9.76"
        strokeLinecap="round"
      />
      <g id="stress">
        <path
          d="M108.711 35.2752C108.161 35.2752 107.711 34.8252 107.711 34.2752V22.0352C107.711 21.4852 108.161 21.0352 108.711 21.0352C109.261 21.0352 109.711 21.4852 109.711 22.0352V34.2752C109.711 34.8252 109.261 35.2752 108.711 35.2752Z"
          fill="#6793DB"
        />
        <path
          d="M105.367 32.1452C104.817 32.1452 104.367 31.6952 104.367 31.1452V22.0352C104.367 21.4852 104.817 21.0352 105.367 21.0352C105.917 21.0352 106.367 21.4852 106.367 22.0352V31.1452C106.367 31.6952 105.917 32.1452 105.367 32.1452Z"
          fill="#6793DB"
        />
      </g>
      <path
        d="M32.9881 119.475C30.4981 117.935 30.2081 115.695 30.2081 115.695L29.7481 103.965H25.3781L24.9181 115.695C24.9181 115.695 24.6181 117.935 22.1381 119.475C20.9281 120.225 20.2181 121.905 20.0781 126.155H35.0581C34.8981 121.905 34.1881 120.225 32.9881 119.475Z"
        fill="#C0D68B"
      />
      <path
        d="M20.0078 140.176C20.0278 143.116 20.0578 145.276 20.0578 145.276C20.0578 145.276 19.9978 147.946 22.5478 147.946H32.5778C35.1278 147.946 35.0578 145.276 35.0578 145.276C35.0578 145.276 35.0778 143.106 35.0978 140.176H20.0178H20.0078Z"
        fill="#C0D68B"
      />
      <path
        d="M35.0689 126.836C35.0689 126.606 35.0489 126.376 35.0489 126.156H20.0689C20.0689 126.376 20.0489 126.596 20.0489 126.836C19.9789 130.136 19.9989 135.956 20.0189 140.186H35.0989C35.1289 135.966 35.1489 130.136 35.0789 126.836H35.0689Z"
        fill="#E7FABE"
      />
      <path
        d="M29.6416 102.645H25.4916C25.4916 102.645 24.8516 102.615 24.8516 103.265V105.685C24.8516 106.045 25.1416 106.345 25.5116 106.345H29.6316C29.9916 106.345 30.2916 106.055 30.2916 105.685V103.265C30.2916 102.615 29.6516 102.645 29.6516 102.645H29.6416Z"
        fill="#B08B84"
      />
      <g id="alcohol">
        <path
          d="M67.4144 145.605C68.9544 143.115 71.1944 142.825 71.1944 142.825L82.9244 142.365V137.995L71.1944 137.535C71.1944 137.535 68.9544 137.235 67.4144 134.755C66.6644 133.545 64.9844 132.835 60.7344 132.695V147.675C64.9844 147.515 66.6644 146.805 67.4144 145.605Z"
          fill="#C0D68B"
        />
        <path
          d="M46.7075 132.633C43.7675 132.653 41.6075 132.683 41.6075 132.683C41.6075 132.683 38.9375 132.623 38.9375 135.173V145.203C38.9375 147.753 41.6075 147.683 41.6075 147.683C41.6075 147.683 43.7775 147.703 46.7075 147.723V132.643V132.633Z"
          fill="#C0D68B"
        />
        <path
          d="M60.0609 147.694C60.2909 147.694 60.5209 147.674 60.7409 147.674V132.694C60.5209 132.694 60.3009 132.674 60.0609 132.674C56.7609 132.604 50.9409 132.624 46.7109 132.644V147.724C50.9309 147.754 56.7609 147.774 60.0609 147.704V147.694Z"
          fill="#E7FABE"
        />
        <path
          id="bottleCap"
          d="M84.2469 142.255V138.105C84.2469 138.105 84.2769 137.465 83.6269 137.465H81.2069C80.8469 137.465 80.5469 137.755 80.5469 138.125V142.245C80.5469 142.605 80.8369 142.905 81.2069 142.905H83.6269C84.2769 142.905 84.2469 142.265 84.2469 142.265V142.255Z"
          fill="#B08B84"
        />
      </g>
    </svg>
  );
};

export default AlcoholCharacter;
