"use client";

import { useGSAP } from "@gsap/react";
import gsap from "gsap";
import { useRef } from "react";

gsap.registerPlugin(useGSAP);

const ExerciseCharacter = ({ isPlay }: { isPlay: boolean }) => {
  const ref = useRef<SVGSVGElement>(null);

  useGSAP(
    () => {
      const tl = gsap.timeline({ delay: 0.5, paused: true });
      console.log(isPlay);
      tl.to(
        ["#right-right", "#right-left"],
        {
          y: -10,
          rotation: -10,
          transformOrigin: "top center",
          yoyo: true,
          repeat: -1,
          duration: 1.2,
          ease: "power1.inOut",
        },
        0
      );

      tl.to(
        "#right-hand",
        {
          rotation: -30,
          transformOrigin: "left left",
          yoyo: true,
          repeat: -1,
          duration: 1.2,
          ease: "sine.inOut",
        },
        0
      );

      tl.to(
        ["#left-left", "#left-right"],
        {
          y: 10,
          rotation: 10,
          transformOrigin: "top center",
          yoyo: true,
          repeat: -1,
          duration: 1.2,
          ease: "power1.inOut",
        },
        0
      );

      tl.to(
        "#left-hand",
        {
          rotation: -30,
          transformOrigin: "right right",
          yoyo: true,
          repeat: -1,
          duration: 1.2,
          ease: "sine.inOut",
        },
        0
      );
      const sweatElements = document.querySelectorAll(".sweat");
      sweatElements.forEach((sweat) => {
        const delay = Math.random() * 1;

        tl.to(
          sweat,
          {
            y: 10,
            scale: 0.1,
            duration: 1,
            ease: "power1.in",
            repeat: -1,
            delay,
          },
          0
        );
      });
      if (!isPlay) {
        tl.pause(0);
      }
      if (isPlay) {
        tl.play();
      }
    },
    { scope: ref, dependencies: [isPlay], revertOnUpdate: true }
  );

  return (
    <svg
      width="168"
      height="168"
      viewBox="0 0 168 168"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      ref={ref}
    >
      <g id="right-right">
        <path
          d="M125.541 129.351C129.395 129.351 132.519 125.186 132.519 120.047C132.519 114.908 129.395 110.742 125.541 110.742C121.687 110.742 118.562 114.908 118.562 120.047C118.562 125.186 121.687 129.351 125.541 129.351Z"
          fill="#70B56D"
        />
        <path
          d="M125.534 110.73H122.039V129.351H125.534V110.73Z"
          fill="#70B56D"
        />
        <path
          d="M122.041 129.351C125.895 129.351 129.019 125.186 129.019 120.047C129.019 114.908 125.895 110.742 122.041 110.742C118.187 110.742 115.062 114.908 115.062 120.047C115.062 125.186 118.187 129.351 122.041 129.351Z"
          fill="#8CC388"
        />
        <path
          d="M120.871 117.707H109.24C107.96 117.707 106.914 118.753 106.914 120.033C106.914 121.313 107.96 122.359 109.24 122.359H120.871C122.151 122.359 123.197 121.313 123.197 120.033C123.197 118.753 122.151 117.707 120.871 117.707Z"
          fill="#70B56D"
        />
        <path
          d="M122.045 123.54C123.33 123.54 124.371 121.976 124.371 120.046C124.371 118.115 123.33 116.551 122.045 116.551C120.76 116.551 119.719 118.115 119.719 120.046C119.719 121.976 120.76 123.54 122.045 123.54Z"
          fill="#70B56D"
        />
      </g>
      <g id="left-left">
        <path
          d="M41.7519 120.035C45.6059 120.035 48.7303 115.869 48.7303 110.73C48.7303 105.592 45.6059 101.426 41.7519 101.426C37.8978 101.426 34.7734 105.592 34.7734 110.73C34.7734 115.869 37.8978 120.035 41.7519 120.035Z"
          fill="#70B56D"
        />
        <path
          d="M45.2526 101.426H41.7578V120.046H45.2526V101.426Z"
          fill="#70B56D"
        />
        <path
          d="M45.2441 120.035C49.0981 120.035 52.2225 115.869 52.2225 110.73C52.2225 105.592 49.0981 101.426 45.2441 101.426C41.39 101.426 38.2656 105.592 38.2656 110.73C38.2656 115.869 41.39 120.035 45.2441 120.035Z"
          fill="#8CC388"
        />
        <path
          d="M45.248 114.224C46.5327 114.224 47.5742 112.659 47.5742 110.729C47.5742 108.799 46.5327 107.234 45.248 107.234C43.9633 107.234 42.9219 108.799 42.9219 110.729C42.9219 112.659 43.9633 114.224 45.248 114.224Z"
          fill="#70B56D"
        />
        <path
          d="M46.4043 108.402H58.035C59.3149 108.402 60.3611 109.449 60.3611 110.728C60.3611 112.008 59.3149 113.055 58.035 113.055H46.4043C45.1243 113.055 44.0781 112.008 44.0781 110.728C44.0781 109.449 45.1243 108.402 46.4043 108.402Z"
          fill="#70B56D"
        />
      </g>

      <path
        d="M106.431 122.028C106.431 135.272 95.6903 140.96 82.4458 140.96C69.2013 140.96 58.4609 135.272 58.4609 122.028C58.4609 108.783 69.2013 98.043 82.4458 98.043C95.6903 98.043 106.431 108.783 106.431 122.028Z"
        fill="#C0D68B"
      />
      <path
        d="M123.006 78.0073C122.405 90.1055 117.186 99.065 108.938 104.674C101.637 109.661 92.2212 111.853 82.1932 111.631C81.0914 111.608 79.9784 111.564 78.8654 111.475C72.7439 111.041 66.8785 109.783 61.603 107.657C57.151 105.877 53.0997 103.461 49.6606 100.412C42.0366 93.667 37.7294 84.0286 38.3193 71.9193C38.6532 65.2191 40.4228 58.9641 43.3277 53.4548C46.6221 47.1887 50.5399 41.1675 54.925 35.5914C61.7254 26.9435 71.6644 21.5678 82.7163 22.358C92.6442 23.0703 101.192 28.6241 107.124 36.6599C111.71 42.9037 115.65 49.6929 118.866 56.6491C121.86 63.1267 123.385 70.3945 123.006 77.9962V78.0073Z"
        fill="#C0D68B"
      />
      <path
        d="M114.608 75.2691C115.566 92.6094 101.453 104.518 83.2555 105.498C65.0693 106.477 49.7101 96.1599 48.7418 78.8195C47.7846 61.4792 61.7303 46.632 79.9277 45.6525C98.125 44.6731 113.64 57.9288 114.608 75.2691Z"
        fill="#F3F3DF"
      />
      <path
        d="M69.2443 70.239C69.0217 69.9942 68.6544 69.9163 68.3873 70.1055C67.4969 70.7176 66.8625 71.8306 66.7957 73.1217C66.6844 75.1473 67.9866 76.8947 69.6783 76.9837C71.3812 77.0839 72.4719 75.6148 72.5832 73.578C72.6055 73.0883 72.5832 72.5986 72.4831 72.1534C71.2365 71.7527 70.1124 71.2185 69.2331 70.2279L69.2443 70.239Z"
        fill="#44443F"
      />
      <path
        d="M95.376 70.5394C95.1757 70.2834 94.7973 70.2945 94.5858 70.5394C93.4951 71.8416 91.9258 72.5984 90.1895 72.9434C90.1561 73.2106 90.1784 73.2885 90.1895 72.9657C90.0782 74.9913 91.3693 76.7387 93.0721 76.8278C94.7861 76.9279 96.0772 75.5256 96.1885 73.4999C96.2553 72.3758 95.9325 71.3074 95.3538 70.5505L95.376 70.5394Z"
        fill="#44443F"
      />
      <path
        d="M84.805 88.7467C84.7382 85.6637 82.9463 83.8829 81.8778 83.9719C80.3753 84.0944 78.9173 86.1089 78.9952 89.203C79.062 92.2748 80.9652 92.1746 82.0336 92.0967C83.1021 92.0188 84.8717 91.8408 84.805 88.7689V88.7467Z"
        fill="#44443F"
      />
      <path
        d="M69.8203 129.594V145.999"
        stroke="#C0D68B"
        strokeWidth="10.8628"
        strokeLinecap="round"
      />
      <path
        d="M93.8047 129.594V145.999"
        stroke="#C0D68B"
        strokeWidth="10.8628"
        strokeLinecap="round"
      />

      <path
        id="left-hand"
        d="M67.1761 111.398C62.1565 113.535 55.8348 121.95 51.3828 114.526"
        stroke="#C0D68B"
        strokeWidth="10.8628"
        strokeLinecap="round"
      />
      <g id="left-right">
        <path
          d="M58.0487 120.035C61.9028 120.035 65.0272 115.869 65.0272 110.73C65.0272 105.592 61.9028 101.426 58.0487 101.426C54.1947 101.426 51.0703 105.592 51.0703 110.73C51.0703 115.869 54.1947 120.035 58.0487 120.035Z"
          fill="#70B56D"
        />
        <path
          d="M61.5338 101.426H58.0391V120.046H61.5338V101.426Z"
          fill="#70B56D"
        />
        <path
          d="M61.5409 120.035C65.395 120.035 68.5194 115.869 68.5194 110.73C68.5194 105.592 65.395 101.426 61.5409 101.426C57.6868 101.426 54.5625 105.592 54.5625 110.73C54.5625 115.869 57.6868 120.035 61.5409 120.035Z"
          fill="#8CC388"
        />
        <path
          d="M61.5449 114.224C62.8296 114.224 63.871 112.659 63.871 110.729C63.871 108.799 62.8296 107.234 61.5449 107.234C60.2602 107.234 59.2188 108.799 59.2188 110.729C59.2188 112.659 60.2602 114.224 61.5449 114.224Z"
          fill="#70B56D"
        />
      </g>
      <path
        id="right-hand"
        d="M99.9375 111.707C103.889 115.469 106.86 125.553 113.627 120.166"
        stroke="#C0D68B"
        strokeWidth="10.8628"
        strokeLinecap="round"
      />
      <g id="right-left">
        <path
          d="M109.244 129.351C113.098 129.351 116.222 125.186 116.222 120.047C116.222 114.908 113.098 110.742 109.244 110.742C105.39 110.742 102.266 114.908 102.266 120.047C102.266 125.186 105.39 129.351 109.244 129.351Z"
          fill="#70B56D"
        />
        <path
          d="M109.245 110.73H105.75V129.351H109.245V110.73Z"
          fill="#70B56D"
        />
        <path
          d="M105.752 129.351C109.606 129.351 112.73 125.186 112.73 120.047C112.73 114.908 109.606 110.742 105.752 110.742C101.898 110.742 98.7734 114.908 98.7734 120.047C98.7734 125.186 101.898 129.351 105.752 129.351Z"
          fill="#8CC388"
        />
        <path
          d="M105.748 123.54C107.033 123.54 108.074 121.976 108.074 120.046C108.074 118.115 107.033 116.551 105.748 116.551C104.463 116.551 103.422 118.115 103.422 120.046C103.422 121.976 104.463 123.54 105.748 123.54Z"
          fill="#70B56D"
        />
      </g>
      <g>
        <path
          className="sweat"
          d="M102.353 46.6672C102.353 47.3461 101.83 47.9026 101.184 47.9026C100.539 47.9026 100.016 47.3461 100.016 46.6672C100.016 46.1552 100.661 44.6415 100.995 44.252C101.095 44.1295 101.273 44.1295 101.385 44.252C101.718 44.6415 102.364 46.1552 102.364 46.6672H102.353Z"
          fill="#F3F3DF"
        />
        <path
          className="sweat"
          d="M63.8763 35.8C63.8763 36.4789 63.3532 37.0354 62.7077 37.0354C62.0622 37.0354 61.5391 36.4789 61.5391 35.8C61.5391 35.288 62.1846 33.7743 62.5185 33.3848C62.6187 33.2624 62.7967 33.2624 62.908 33.3848C63.2419 33.7743 63.8875 35.288 63.8875 35.8H63.8763Z"
          fill="#F3F3DF"
        />
        <path
          className="sweat"
          d="M44.0951 73.2883C44.0951 73.9672 43.572 74.5237 42.9264 74.5237C42.2809 74.5237 41.7578 73.9672 41.7578 73.2883C41.7578 72.7763 42.4033 71.2626 42.7372 70.8731C42.8374 70.7506 43.0155 70.7506 43.1268 70.8731C43.4607 71.2626 44.1062 72.7763 44.1062 73.2883H44.0951Z"
          fill="#F3F3DF"
        />
        <path
          className="sweat"
          d="M94.3607 115.093C94.3607 115.772 93.8376 116.328 93.1921 116.328C92.5465 116.328 92.0234 115.772 92.0234 115.093C92.0234 114.581 92.669 113.067 93.0029 112.678C93.103 112.555 93.2811 112.555 93.3924 112.678C93.7263 113.067 94.3718 114.581 94.3718 115.093H94.3607Z"
          fill="#F3F3DF"
        />
      </g>
    </svg>
  );
};

export default ExerciseCharacter;
